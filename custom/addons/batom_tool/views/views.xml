<?xml version="1.0"?>
<odoo>
    <data>
        <record id="view_cutter_tree" model="ir.ui.view">
            <field name="name">Cutter Tree</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <tree string="Cutter">
                    <field name="batom_code"/>
                    <field name="cutter_class"/>
                    <field name="cutter_code"/>
                    <field name="product_code"/>
                    <field name="supplier"/>
                    <field name="consigned_to"/>
                    <field name="storage"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="search_cutter_filter">
            <field name="name">Online Inventory Filter</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <search string="Cutter Filter">
                    <field name="batom_code"/>
                    <field name="cutter_class"/>
                    <field name="cutter_code"/>
                    <field name="product_code"/>
                    <field name="supplier"/>
                    <field name="consigned_to"/>
                    <field name="storage"/>
                </search>
            </field>
        </record>
        <record id="action_cutter" model="ir.actions.act_window">
            <field name="name">Cutter Information</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_cutter_tree"/>
            <field name="search_view_id" ref="search_cutter_filter"/>
        </record>
        
        <record id="view_cutter_form" model="ir.ui.view">
            <field name="name">batom.cutter.form</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <form string="Cutter">
                    <sheet>
                        <group>
                            <group name="data">
                                <field name="cutter_group_id"/>
                                <field name="batom_code"/>
                                <field name="cutter_class"/>
                                <field name="cutter_code"/>
                                <field name="year"/>
                                <field name="total"/>
                            </group>
                            <group>
                                <field name="consigned_to"/>
                                <field name="consigned_to_id"/>
                                <field name="consigned_date"/>
                                <field name="returned_date"/>
                                <field name="storage"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Used by Products">
                                <group>
                                    <group>
                                        <field name="product_code"/>
                                    </group>
                                </group>
                                <field name="product_ids">
                                    <tree editable="bottom">
                                        <field name="default_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Suppliers">
                                <group>
                                    <group>
                                        <field name="supplier"/>
                                    </group>
                                </group>
                                <field name="supplier_ids">
                                    <tree editable="bottom">
                                        <field name="x_supplier_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="History List">
                                <group>
                                    <group>
                                        <field name="history_file_name" readonly="1" invisible="1"/>
                                        <field name="history_file" widget="binary" filename='history_file_name'/>
                                    </group>
                                </group>
                                <field name="history_ids">
                                    <tree editable="bottom">
                                        <field name="date"/>
                                        <field name="action_id"/>
                                        <field name="sharpening_mm"/>
                                        <field name="processed_quantity"/>
                                        <field name="cost"/>
                                        <field name="remarks"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Parameters">
                                <group>
                                    <group>
                                        <field name="material"/>
                                        <field name="type"/>
                                        <field name="mod"/>
                                        <field name="dp"/>
                                        <field name="pa"/>
                                        <field name="teeth"/>
                                        <field name="od"/>
                                    </group>
                                    <group>
                                        <field name="length"/>
                                        <field name="bore"/>
                                        <field name="df"/>
                                        <field name="dtr_sn"/>
                                        <field name="allowed_sharpening"/>
                                        <field name="standard_sharpening"/>
                                        <field name="allowed_sharpening_times"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Documents">
                                <group>
                                    <group>
                                        <field name="image_file_name" readonly="1" invisible="1"/>
                                        <field name="inquiry_form_name" readonly="1" invisible="1"/>
                                        <field name="supplier_quotation_name" readonly="1" invisible="1"/>
                                        <field name="image_file" widget="binary" filename='image_file_name'/>
                                        <field name="inquiry_form" widget="binary" filename='inquiry_form_name'/>
                                        <field name="supplier_quotation" widget="binary" filename='supplier_quotation_name'/>
                                    </group>
                                    <group>
                                        <field name="purchase_request_name" readonly="1" invisible="1"/>
                                        <field name="purchase_order_name" readonly="1" invisible="1"/>
                                        <field name="order_confirmation_name" readonly="1" invisible="1"/>
                                        <field name="invoice_name" readonly="1" invisible="1"/>
                                        <field name="purchase_request" widget="binary" filename='purchase_request_name'/>
                                        <field name="purchase_order" widget="binary" filename='purchase_order_name'/>
                                        <field name="order_confirmation" widget="binary" filename='order_confirmation_name'/>
                                        <field name="invoice" widget="binary" filename='invoice_name'/>
                                    </group>
                                </group>
                            </page>
                            <page string="Costs">
                                <group>
                                    <group>
                                        <field name="price" widget='monetary' options="{'currency_field': 'price_currency_id'}"/>
                                        <field name="tax" widget='monetary' options="{'currency_field': 'tax_currency_id'}"/>
                                        <field name="shipping" widget='monetary' options="{'currency_field': 'shipping_currency_id'}"/>
                                        <field name="exchange_rate"/>
                                    </group>
                                    <group>
                                        <field name="coating"/>
                                        <field name="dressing_cost" widget='monetary' options="{'currency_field': 'dressing_cost_currency_id'}"/>
                                        <field name="sharpening_cost" widget='monetary' options="{'currency_field': 'sharpening_cost_currency_id'}"/>
                                        <field name="titanium_cost" widget='monetary' options="{'currency_field': 'titanium_cost_currency_id'}"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Miscellaneous">
                                <group>
                                    <group>
                                        <field name="state"/>
                                        <field name="inquiry_number"/>
                                        <field name="order_date"/>
                                        <field name="expected_delivery_date"/>
                                        <field name="status"/>
                                    </group>
                                    <group>
                                        <field name="remarks"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="product_template_form_view_cutter_button" model="ir.ui.view">
            <field name="name">product.template.procurement</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" name="action_template_view_cutter" type="object"
                        attrs="{'invisible':[('type', 'not in', ['product', 'consu'])]}" icon="fa-cog">
                        <field string="Cutters" name="cutter_count" widget="statinfo" />
                    </button>
                </div>
            </field>
        </record>

        <record id="product_product_form_view_cutter_button" model="ir.ui.view">
            <field name="name">product.product.procurement</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field name="groups_id" eval="[(4, ref('mrp.group_mrp_user'))]"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" name="action_view_cutter" type="object"
                        attrs="{'invisible':[('type', 'not in', ['product', 'consu'])]}" icon="fa-cog">
                        <field string="Cutters" name="cutter_count" widget="statinfo" />
                    </button>
                </div>
            </field>
        </record>

        <record id="template_open_cutter" model="ir.actions.act_window">
            <field name="name">Cutters</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_id" ref="view_cutter_tree"/>
        </record>
        
        <record id="product_open_cutter" model="ir.actions.act_window">
            <field name="name">Cutters</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_id" ref="view_cutter_tree"/>
        </record>
        
        <menuitem id="menu_cutter" name="Cutter"
            parent="mrp.menu_mrp_reporting"
            action="action_cutter"
            sequence="30"/>
    </data>
</odoo>
