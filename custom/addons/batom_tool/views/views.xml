<?xml version="1.0"?>
<odoo>
    <data>
        <record id="view_cutter_model_tree" model="ir.ui.view">
            <field name="name">Cutter Model Tree</field>
            <field name="model">batom.cutter.model</field>
            <field name="arch" type="xml">
                <tree string="Cutter Model">
                    <field name="cutter_model_code"/>
                    <field name="cutter_class"/>
                    <field name="product_code"/>
                    <field name="supplier_ids"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="search_cutter_model_filter">
            <field name="name">Cutter model Filter</field>
            <field name="model">batom.cutter.model</field>
            <field name="arch" type="xml">
                <search string="Cutter Model Filter">
                    <field name="cutter_model_code"/>
                    <field name="cutter_class"/>
                    <field name="product_code"/>
                    <field name="supplier_ids"/>
                </search>
            </field>
        </record>
        <record id="action_cutter_model" model="ir.actions.act_window">
            <field name="name">Cutter Model</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">batom.cutter.model</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_cutter_model_tree"/>
            <field name="search_view_id" ref="search_cutter_model_filter"/>
        </record>
        
        <record id="view_cutter_model_form" model="ir.ui.view">
            <field name="name">batom.cutter.model.form</field>
            <field name="model">batom.cutter.model</field>
            <field name="arch" type="xml">
                <form string="Cutter Model">
                    <sheet>
                        <group>
                            <group name="data">
                                <field name="cutter_model_code"/>
                                <field name="cutter_group_id"/>
                                <field name="cutter_class"/>
                                <field name="image_file_name" invisible="1"/>
                                <field name="image_file" widget="binary" filename='image_file_name'/>
                            </group>
                            <group>
                                <field name="notes"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Used by Products">
                                <field name="product_ids">
                                    <tree editable="bottom">
                                        <field name="default_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Suppliers">
                                <field name="supplier_ids">
                                    <tree editable="bottom">
                                        <field name="x_supplier_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="History List">
                                <field name="model_history_ids">
                                    <tree editable="bottom">
                                        <field name="date"/>
                                        <field name="remarks"/>
                                        <field name="attached_file_name" invisible="1"/>
                                        <field name="attached_file" widget="binary" filename='attached_file_name'/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Parameters">
                                <group>
                                    <group>
                                        <field name="material"/>
                                        <field name="type"/>
                                        <field name="mod"/>
                                        <field name="dp"/>
                                        <field name="pa"/>
                                        <field name="teeth"/>
                                        <field name="od"/>
                                    </group>
                                    <group>
                                        <field name="length"/>
                                        <field name="bore"/>
                                        <field name="df"/>
                                        <field name="dtr_sn"/>
                                        <field name="allowed_sharpening"/>
                                        <field name="standard_sharpening"/>
                                        <field name="allowed_sharpening_times"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Costs">
                                <group>
                                    <group>
                                        <field name="coating"/>
                                        <field name="dressing_cost" widget='monetary' options="{'currency_field': 'dressing_cost_currency_id'}"/>
                                        <field name="sharpening_cost" widget='monetary' options="{'currency_field': 'sharpening_cost_currency_id'}"/>
                                        <field name="titanium_cost" widget='monetary' options="{'currency_field': 'titanium_cost_currency_id'}"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_cutter_tree" model="ir.ui.view">
            <field name="name">Cutter Tree</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <tree string="Cutter">
                    <field name="batom_code"/>
                    <field name="cutter_model_id"/>
                    <field name="product_code"/>
                    <field name="status"/>
                    <field name="consigned_to"/>
                    <field name="storage"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="search_cutter_filter">
            <field name="name">Cutter Filter</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <search string="Cutter Filter">
                    <field name="batom_code"/>
                    <field name="cutter_model_id"/>
                    <field name="product_code"/>
                    <field name="status"/>
                    <field name="consigned_to"/>
                    <field name="storage"/>
                    <separator/>
                    <filter string="Archived" name="inactive" domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>
        <record id="action_cutter" model="ir.actions.act_window">
            <field name="name">Cutter Information</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_cutter_tree"/>
            <field name="search_view_id" ref="search_cutter_filter"/>
        </record>
        
        <record id="view_cutter_form" model="ir.ui.view">
            <field name="name">batom.cutter.form</field>
            <field name="model">batom.cutter</field>
            <field name="arch" type="xml">
                <form string="Cutter">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" type="object"
                                    class="oe_stat_button" icon="fa-archive">
                                <field name="active" widget="boolean_button"
                                    options='{"terminology": "archive"}'/>
                            </button>
                        </div>
                        <div class="oe_title">
                            <label class="oe_edit_only" for="batom_code"/>
                            <h1><field name="batom_code"/></h1>
                            <div name="status">
                                <div>
                                    <label for="status"/>
                                    <field name="status"/>
                                </div>
                            </div>
                        </div>
                        <group>
                            <group name="data">
                                <field name="total"/>
                                <field name="cutter_model_id"/>
                                <field name="year"/>
                                <field name="consigned_to"/>
                                <field name="consigned_to_id"/>
                                <field name="consigned_date"/>
                                <field name="returned_date"/>
                                <field name="storage"/>
                            </group>
                            <group>
                                <field name="managing_department"/>
                                <field name="notes" textarea_height="300"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Used by Products">
                                <group>
                                    <group>
                                        <field name="product_code"/>
                                    </group>
                                </group>
                                <field name="product_ids">
                                    <tree editable="bottom">
                                        <field name="default_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Suppliers">
                                <group>
                                    <group>
                                        <field name="supplier"/>
                                    </group>
                                </group>
                                <field name="supplier_ids">
                                    <tree editable="bottom">
                                        <field name="x_supplier_code"/>
                                        <field name="name"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="History List">
                                <group>
                                    <group>
                                        <field name="history_file_name" invisible="1"/>
                                        <field name="history_file" widget="binary" filename='history_file_name'/>
                                    </group>
                                </group>
                                <field name="history_ids">
                                    <tree editable="bottom">
                                        <field name="date"/>
                                        <field name="action_id"/>
                                        <field name="sharpening_mm"/>
                                        <field name="processed_quantity"/>
                                        <field name="cost"/>
                                        <field name="remarks"/>
                                        <field name="attached_file_name" invisible="1"/>
                                        <field name="attached_file" widget="binary" filename='attached_file_name'/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Documents">
                                <group>
                                    <group>
                                        <field name="image_file_name" readonly="1" invisible="1"/>
                                        <field name="inquiry_form_name" readonly="1" invisible="1"/>
                                        <field name="supplier_quotation_name" readonly="1" invisible="1"/>
                                        <field name="image_file" widget="binary" filename='image_file_name'/>
                                        <field name="inquiry_form" widget="binary" filename='inquiry_form_name'/>
                                        <field name="supplier_quotation" widget="binary" filename='supplier_quotation_name'/>
                                    </group>
                                    <group>
                                        <field name="purchase_request_name" readonly="1" invisible="1"/>
                                        <field name="purchase_order_name" readonly="1" invisible="1"/>
                                        <field name="order_confirmation_name" readonly="1" invisible="1"/>
                                        <field name="invoice_name" readonly="1" invisible="1"/>
                                        <field name="purchase_request" widget="binary" filename='purchase_request_name'/>
                                        <field name="purchase_order" widget="binary" filename='purchase_order_name'/>
                                        <field name="order_confirmation" widget="binary" filename='order_confirmation_name'/>
                                        <field name="invoice" widget="binary" filename='invoice_name'/>
                                    </group>
                                </group>
                            </page>
                            <page string="Costs">
                                <group>
                                    <group>
                                        <field name="price" widget='monetary' options="{'currency_field': 'price_currency_id'}"/>
                                        <field name="tax" widget='monetary' options="{'currency_field': 'tax_currency_id'}"/>
                                        <field name="shipping" widget='monetary' options="{'currency_field': 'shipping_currency_id'}"/>
                                        <field name="exchange_rate"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Miscellaneous">
                                <group>
                                    <group>
                                        <field name="state"/>
                                        <field name="inquiry_number"/>
                                        <field name="order_date"/>
                                        <field name="expected_delivery_date"/>
                                    </group>
                                    <group>
                                        <field name="cutter_group_id"/>
                                        <field name="cutter_class"/>
                                        <field name="remarks"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="product_template_form_view_cutter_button" model="ir.ui.view">
            <field name="name">product.template.procurement</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="groups_id" eval="[(4, ref('batom_tool.group_tool_management_user'))]"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" name="action_template_view_cutter" type="object"
                        attrs="{'invisible':[('type', 'not in', ['product', 'consu'])]}" icon="fa-cog">
                        <field string="Cutters" name="cutter_count" widget="statinfo" />
                    </button>
                </div>
            </field>
        </record>

        <record id="product_product_form_view_cutter_button" model="ir.ui.view">
            <field name="name">product.product.procurement</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field name="groups_id" eval="[(4, ref('batom_tool.group_tool_management_user'))]"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" name="action_view_cutter" type="object"
                        attrs="{'invisible':[('type', 'not in', ['product', 'consu'])]}" icon="fa-cog">
                        <field string="Cutters" name="cutter_count" widget="statinfo" />
                    </button>
                </div>
            </field>
        </record>

        <record id="template_open_cutter" model="ir.actions.act_window">
            <field name="name">Cutters</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_id" ref="view_cutter_tree"/>
        </record>
        
        <record id="product_open_cutter" model="ir.actions.act_window">
            <field name="name">Cutters</field>
            <field name="res_model">batom.cutter</field>
            <field name="view_id" ref="view_cutter_tree"/>
        </record>

        <menuitem id="menu_tool_management_root"
            name="Tool Management"
            groups="group_tool_management_user,group_tool_management_officer"
            icon="fa-gears"
            sequence="37"/>
        
        <menuitem id="menu_cutter_management" name="Cutter Management"
            parent="menu_tool_management_root"
            sequence="10"/>
        
        <menuitem id="menu_mold_management" name="Mold Management"
            parent="menu_tool_management_root"
            sequence="20"/>

        <menuitem id="menu_tool_configuration"
            name="Configuration"
            parent="menu_tool_management_root"
            groups="group_tool_management_officer"
            sequence="100"/>
        
        <menuitem id="menu_cutter_model" name="Cutter Model"
            parent="menu_cutter_management"
            action="action_cutter_model"
            sequence="10"/>
        
        <menuitem id="menu_cutter" name="Cutter Information"
            parent="menu_cutter_management"
            action="action_cutter"
            sequence="20"/>

        <record id="product_template_action" model="ir.actions.act_window">
            <field name="name">Products</field>
            <field name="res_model">product.template</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{"search_default_consumable": 1, 'default_type': 'product'}</field>
        </record>

        <menuitem id="menu_tool_management_master_data"
            name="Master Data"
            parent="menu_tool_management_root"
            sequence="30"/>
        
        <menuitem id="menu_tool_management_product_form"
            name="Products"
            action="product_template_action"
            parent="menu_tool_management_master_data"/>
    </data>
</odoo>
